<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>koushik hotel â€” Tiffin Delivery</title>
  <style>
    :root{
      --accent:#d35400;
      --muted:#666;
      --card:#fff;
      --bg:#f5f5f5;
      --radius:12px;
      --glass: rgba(255,255,255,0.9);
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      background: linear-gradient(180deg,#fff 0%, var(--bg) 100%);
      color:#222;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding:16px;
    }
    header{
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
      max-width:1100px;
      margin:0 auto 18px;
    }
    .brand{display:flex;gap:12px;align-items:center}
    .logo{
      width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#f39c12);
      display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:20px;
      box-shadow:0 6px 18px rgba(0,0,0,0.08);
    }
    h1{font-size:20px;margin:0}
    .contact{font-size:13px;color:var(--muted)}
    .cart-btn{
      background:var(--card);
      padding:8px 12px;border-radius:10px;border:1px solid #eee;display:flex;gap:8px;align-items:center;
      cursor:pointer;box-shadow:0 6px 18px rgba(0,0,0,0.04);
    }
    .cart-count{
      background:var(--accent);color:#fff;padding:4px 8px;border-radius:999px;font-weight:600;font-size:13px;
    }
    main{max-width:1100px;margin:0 auto;display:grid;grid-template-columns:1fr 380px;gap:18px}
    @media (max-width:900px){
      main{grid-template-columns:1fr}
    }
    /* Menu cards */
    .menu{
      display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:14px;
    }
    .card{
      background:var(--card);border-radius:var(--radius);padding:12px;border:1px solid #eee;
      display:flex;gap:12px;align-items:center;
    }
    .thumb{
      width:84px;height:84px;border-radius:10px;flex-shrink:0;background-size:cover;background-position:center;
    }
    .info{flex:1}
    .info h3{margin:0 0 6px;font-size:16px}
    .info p{margin:0;color:var(--muted);font-size:13px}
    .meta{display:flex;justify-content:space-between;align-items:center;margin-top:10px}
    .price{font-weight:700}
    .btn{background:var(--accent);color:#fff;padding:8px 10px;border-radius:8px;border:none;cursor:pointer}
    .btn.secondary{background:#eee;color:#333}
    /* Right column - cart & checkout */
    .sidebar{position:sticky;top:18px;background:var(--glass);padding:14px;border-radius:12px;border:1px solid #eee;box-shadow:0 8px 30px rgba(0,0,0,0.04)}
    .cart-list{max-height:320px;overflow:auto;margin-bottom:10px}
    .cart-item{display:flex;gap:10px;align-items:center;padding:8px 0;border-bottom:1px dashed #eee}
    .qty-controls{display:flex;gap:6px;align-items:center}
    .small{font-size:13px;color:var(--muted)}
    input[type="text"], input[type="tel"], textarea{
      width:100%;padding:8px;border-radius:8px;border:1px solid #ddd;margin-top:6px;font-size:14px;
    }
    label{font-weight:600;font-size:14px}
    .checkout-actions{display:flex;gap:10px;margin-top:12px}
    .summary{padding:10px;background:#fff;border-radius:8px;border:1px solid #eee;margin-top:10px}
    .empty{padding:20px;text-align:center;color:var(--muted)}
    footer{max-width:1100px;margin:18px auto;color:var(--muted);font-size:13px;text-align:center}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo" aria-hidden="true">S</div>
      <div>
        <h1>koushik hotel â€” Tiffin Delivery</h1>
        <div class="contact">Fresh home-style meals â€¢ Contact: <strong>6309713610</strong></div>
      </div>
    </div>
    <button id="openCart" class="cart-btn" aria-controls="cart" aria-expanded="false">
      ðŸ§¾ Cart <span id="cartCount" class="cart-count">0</span>
    </button>
  </header>

  <main>
    <section>
      <h2 style="margin:0 0 12px">Menu</h2>
      <div class="menu" id="menu"></div>
    </section>

    <aside class="sidebar" id="cartPanel" aria-live="polite">
      <h3 style="margin:0 0 8px">Your Cart</h3>
      <div id="cartList" class="cart-list"></div>
      <div id="cartEmpty" class="empty">Cart is empty. Add tasty tiffins!</div>

      <div class="summary" id="summary" style="display:none">
        <div style="display:flex;justify-content:space-between"><div class="small">Subtotal</div><div id="subtotal">â‚¹0.00</div></div>
        <div style="display:flex;justify-content:space-between;margin-top:6px"><div class="small">Delivery</div><div id="deliveryFee">â‚¹40.00</div></div>
        <hr style="border:none;border-top:1px solid #eee;margin:10px 0" />
        <div style="display:flex;justify-content:space-between;font-weight:700"><div>Total</div><div id="total">â‚¹0.00</div></div>
      </div>

      <div id="checkoutSection" style="margin-top:12px;display:none">
        <h4 style="margin:6px 0">Delivery Details</h4>
        <form id="checkoutForm" novalidate>
          <label for="name">Full name*</label>
          <input id="name" name="name" type="text" required placeholder="e.g., Ravi Kumar" />

          <label for="phone">Phone*</label>
          <input id="phone" name="phone" type="tel" required placeholder="10-digit mobile" />

          <label for="address">Address*</label>
          <textarea id="address" name="address" rows="3" required placeholder="Flat, street, landmark"></textarea>

          <label for="city">City*</label>
          <input id="city" name="city" type="text" required placeholder="e.g., Hyderabad" />

          <label for="pincode">Pincode*</label>
          <input id="pincode" name="pincode" type="text" required placeholder="6-digit pincode" />

          <div class="checkout-actions">
            <button type="button" id="placeOrder" class="btn">Place Order</button>
            <button type="button" id="clearCart" class="btn secondary">Clear Cart</button>
          </div>
        </form>
      </div>

      <div id="orderConfirmation" style="display:none;margin-top:10px" aria-live="polite"></div>
    </aside>
  </main>

  <footer>koushik hotel â€¢ Call/WhatsApp: 6309713610 â€¢ Demo site (client-only)</footer>

  <script>
    // Product data (10 items)
    const products = [
      { id: 't1', name: 'Hyderabadi Veg Thali', desc: 'Seasonal veg curry, dal, rice, chapati', price: 120, img: 'https://images.unsplash.com/photo-1604908176556-63f3f0b0f2b5?w=800&q=60' },
      { id: 't2', name: 'Andhra Chicken Curry', desc: 'Spicy chicken curry with steamed rice', price: 150, img: 'https://images.unsplash.com/photo-1604908176948-6b5b7945e1b6?w=800&q=60' },
      { id: 't3', name: 'Daal & Jeera Rice', desc: 'Comforting dal tadka with jeera rice', price: 90, img: 'https://images.unsplash.com/photo-1600891964599-f61ba0e24092?w=800&q=60' },
      { id: 't4', name: 'Paneer Masala', desc: 'Creamy paneer masala with roti', price: 140, img: 'https://images.unsplash.com/photo-1594007657835-24a3e2f5a7c2?w=800&q=60' },
      { id: 't5', name: 'Mixed Veg Biryani', desc: 'Aromatic biryani with raita', price: 160, img: 'https://images.unsplash.com/photo-1604908177522-5e1e97f6c7f6?w=800&q=60' },
      { id: 't6', name: 'Egg Curry Thali', desc: 'Egg curry, rice, and chapati', price: 110, img: 'https://images.unsplash.com/photo-1551218808-94e220e084d2?w=800&q=60' },
      { id: 't7', name: 'Chole Bhature', desc: 'Spicy chole with fluffy bhature', price: 130, img: 'https://images.unsplash.com/photo-1606755962777-4f5d3b2b4c2b?w=800&q=60' },
      { id: 't8', name: 'Masala Dosa', desc: 'Crispy dosa with potato masala and chutney', price: 100, img: 'https://images.unsplash.com/photo-1544025162-d76694265947?w=800&q=60' },
      { id: 't9', name: 'Chicken Biryani', desc: 'Classic chicken biryani with salan', price: 170, img: 'https://images.unsplash.com/photo-1606787366850-de6330128bfc?w=800&q=60' },
      { id: 't10', name: 'Roti Sabzi Combo', desc: '2 rotis with seasonal sabzi and salad', price: 80, img: 'https://images.unsplash.com/photo-1551183053-bf91a1d81141?w=800&q=60' },
    ];

    // Delivery fee (fixed)
    const DELIVERY_FEE = 40;

    // Local storage keys
    const CART_KEY = 'swadist_hotel_cart_v1';

    // Elements
    const menuEl = document.getElementById('menu');
    const cartCountEl = document.getElementById('cartCount');
    const cartListEl = document.getElementById('cartList');
    const cartEmptyEl = document.getElementById('cartEmpty');
    const subtotalEl = document.getElementById('subtotal');
    const deliveryFeeEl = document.getElementById('deliveryFee');
    const totalEl = document.getElementById('total');
    const summaryEl = document.getElementById('summary');
    const checkoutSection = document.getElementById('checkoutSection');
    const orderConfirmation = document.getElementById('orderConfirmation');
    const openCartBtn = document.getElementById('openCart');

    // Initialize delivery fee text
    deliveryFeeEl.textContent = â‚¹${DELIVERY_FEE.toFixed(2)};

    // Build the menu UI
    function renderMenu(){
      menuEl.innerHTML = '';
      products.forEach(p => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <div class="thumb" style="background-image:url('${p.img}')"></div>
          <div class="info">
            <h3>${p.name}</h3>
            <p>${p.desc}</p>
            <div class="meta">
              <div class="price">â‚¹${p.price.toFixed(2)}</div>
              <button class="btn" data-id="${p.id}">Add to Cart</button>
            </div>
          </div>
        `;
        menuEl.appendChild(card);
      });

      // Attach add-to-cart handlers
      menuEl.querySelectorAll('button.btn').forEach(btn=>{
        btn.addEventListener('click',()=> addToCart(btn.dataset.id));
      });
    }

    // Cart operations
    function loadCart(){
      try{
        const raw = localStorage.getItem(CART_KEY);
        return raw ? JSON.parse(raw) : {};
      }catch(e){
        console.error('Failed to parse cart', e);
        return {};
      }
    }
    function saveCart(cart){
      localStorage.setItem(CART_KEY, JSON.stringify(cart));
      refreshCartUI();
    }

    function addToCart(productId){
      const cart = loadCart();
      cart[productId] = (cart[productId] || 0) + 1;
      saveCart(cart);
      animateCartCount();
    }
    function removeFromCart(productId){
      const cart = loadCart();
      delete cart[productId];
      saveCart(cart);
    }
    function updateQty(productId, qty){
      const cart = loadCart();
      if(qty <= 0) delete cart[productId];
      else cart[productId] = qty;
      saveCart(cart);
    }
    function clearCart(){
      localStorage.removeItem(CART_KEY);
      refreshCartUI();
    }

    // UI updates
    function refreshCartUI(){
      const cart = loadCart();
      const keys = Object.keys(cart);
      const count = keys.reduce((s,k)=> s + cart[k], 0);
      cartCountEl.textContent = count;
      cartEmptyEl.style.display = count === 0 ? 'block' : 'none';
      summaryEl.style.display = count === 0 ? 'none' : 'block';
      checkoutSection.style.display = count === 0 ? 'none' : 'block';
      orderConfirmation.style.display = 'none';

      // build cart list
      cartListEl.innerHTML = '';
      if(count === 0){
        // empty
      } else {
        keys.forEach(id=>{
          const product = products.find(p=>p.id===id);
          if(!product) return;
          const qty = cart[id];
          const item = document.createElement('div');
          item.className = 'cart-item';
          item.innerHTML = `
            <div style="width:56px;height:56px;border-radius:8px;background-image:url('${product.img}');background-size:cover;background-position:center"></div>
            <div style="flex:1">
              <div style="display:flex;justify-content:space-between;align-items:center">
                <div style="font-weight:700">${product.name}</div>
                <div>â‚¹${(product.price*qty).toFixed(2)}</div>
              </div>
              <div class="small">${product.desc}</div>
              <div style="margin-top:6px;display:flex;justify-content:space-between;align-items:center">
                <div class="qty-controls">
                  <button class="btn secondary" data-action="dec" data-id="${id}">-</button>
                  <div style="padding:6px 8px;border-radius:6px;border:1px solid #eee;margin:0 6px">${qty}</div>
                  <button class="btn" data-action="inc" data-id="${id}">+</button>
                </div>
                <button class="btn secondary" data-action="remove" data-id="${id}">Remove</button>
              </div>
            </div>
          `;
          cartListEl.appendChild(item);
        });
      }

      // attach handlers within cart list
      cartListEl.querySelectorAll('button').forEach(btn=>{
        const id = btn.dataset.id;
        const action = btn.dataset.action;
        if(action === 'inc') btn.addEventListener('click',()=> updateQty(id, loadCart()[id]+1));
        if(action === 'dec') btn.addEventListener('click',()=> updateQty(id, loadCart()[id]-1));
        if(action === 'remove') btn.addEventListener('click',()=> removeFromCart(id));
      });

      // update totals
      const subtotal = keys.reduce((s,k)=>{
        const p = products.find(x=>x.id===k);
        return s + (p ? p.price * cart[k] : 0);
      }, 0);
      subtotalEl.textContent = â‚¹${subtotal.toFixed(2)};
      totalEl.textContent = â‚¹${(subtotal + (count?DELIVERY_FEE:0)).toFixed(2)};

      // show/hide buttons
      document.getElementById('clearCart').onclick = ()=> { if(confirm('Clear entire cart?')) clearCart(); };
      document.getElementById('placeOrder').onclick = placeOrder;
    }

    // Simple cart count animation
    function animateCartCount(){
      cartCountEl.animate([{transform:'scale(1)'},{transform:'scale(1.3)'},{transform:'scale(1)'}],{duration:300})
    }

    // Checkout / Order
    function placeOrder(){
      const cart = loadCart();
      const keys = Object.keys(cart);
      if(keys.length === 0) { alert('Cart is empty'); return; }

      const name = document.getElementById('name').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const address = document.getElementById('address').value.trim();
      const city = document.getElementById('city').value.trim();
      const pincode = document.getElementById('pincode').value.trim();

      // Basic validation
      if(!name || !phone || !address || !city || !pincode){
        alert('Please fill all required delivery fields.');
        return;
      }
      if(!/^\d{6}$/.test(pincode)){
        alert('Please enter a valid 6-digit pincode.');
        return;
      }
      if(!/^\d{10}$/.test(phone)){
        alert('Please enter a valid 10-digit phone number.');
        return;
      }

      // Build order summary (client-side)
      const items = keys.map(k=>{
        const p = products.find(x=>x.id===k);
        return { name: p.name, qty: cart[k], price: p.price, total: p.price * cart[k] };
      });
      const subtotal = items.reduce((s,i)=> s + i.total, 0);
      const total = subtotal + DELIVERY_FEE;

      // Show confirmation
      orderConfirmation.style.display = 'block';
      orderConfirmation.innerHTML = `
        <div style="padding:12px;background:#e9ffe9;border-radius:8px;border:1px solid #c6f0c6">
          <strong>Order placed (demo)</strong>
          <div class="small" style="margin-top:6px">Thanks ${escapeHtml(name)} â€” we received your order for ${items.length} item(s).</div>
          <div style="margin-top:8px">
            <strong>Delivery to:</strong>
            <div class="small">${escapeHtml(address)}, ${escapeHtml(city)} â€” ${escapeHtml(pincode)}</div>
            <div class="small">Phone: ${escapeHtml(phone)}</div>
          </div>
          <div style="margin-top:8px">
            <strong>Order summary</strong>
            <div class="small">${items.map(it=> ${escapeHtml(it.name)} Ã— ${it.qty} â€” â‚¹${it.total.toFixed(2)}).join('<br>')}</div>
            <div style="margin-top:6px"><strong>Total: â‚¹${total.toFixed(2)}</strong> (includes â‚¹${DELIVERY_FEE} delivery)</div>
          </div>
          <div style="margin-top:8px" class="small">For support call koushik hotel: 6309713610</div>
        </div>
      `;

      // Clear cart (demo)
      clearCart();
    }

    // Escape helper to prevent HTML injection in demo
    function escapeHtml(s){
      return String(s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;', '"':'&quot;',"'":"&#39;"}[c]));
    }

    // Toggle cart panel (simple)
    openCartBtn.addEventListener('click', ()=>{
      const cartPanel = document.getElementById('cartPanel');
      const isHidden = cartPanel.style.display === 'none' || !cartPanel.style.display;
      // For this single-page demo, we simply focus the cart panel (it's always visible). Instead animate attention:
      cartPanel.animate([{transform:'translateY(0)'},{transform:'translateY(-6px)'},{transform:'translateY(0)'}],{duration:350})
    });

    // init
    renderMenu();
    refreshCartUI();

    // Keep UI in sync across multiple tabs
    window.addEventListener('storage', ()=> refreshCartUI());
  </script>
</body>
</html>
